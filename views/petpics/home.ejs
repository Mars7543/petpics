<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <% include ../partials/head %>
    </head>

    <body>

        <header>
            <% include ../partials/header %>
        </header>

        <main class="section">

            <div class="columns is-centered is-multiline">
                <% posts.forEach((post) => { %>

                    <div class="column">
                        <img class="post-image" src="<%= post.image %>">
                        <div id="overlay_<%= post._id %>" class="overlay">
                            <p class="title is-size-3 has-text-white"><%= post.user.firstName[0].toUpperCase() + post.user.firstName.slice(1) + " " + post.user.lastName[0].toUpperCase() + post.user.lastName.slice(1) %></p>

                            <a href="/users/<%= post.user._id %>" class="subtitle is-size-4">@<%= post.user.local.username %></a>

                            <p class="subtitle is-size-4 has-text-white"><%= post.liked_by.length %>&nbsp<i class="fas fa-heart"></i> &nbsp <%= post.comments.length %>&nbsp<i class="fas fa-comments"></i></p>
                        </div>
                    </div>

                <% }); %>
            </div>

        </main>

        <footer>
            <% include ../partials/footer %>
        </footer>

        <script type="text/javascript">
            <% posts.forEach((post) => { %>
                $("#overlay_<%= post._id %>").hover(() => {
                    $("#overlay_<%= post._id %> *").fadeToggle(250);
                }, () => {
                    $("#overlay_<%= post._id %> *").fadeToggle(250);
                });
            <% }); %>
        </script>

    </body>
</html>
